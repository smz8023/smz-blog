(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1008:function(e,t,a){"use strict";a.r(t);a(881);var n=a(1005),r=a.n(n),l=(a(117),a(90)),i=a.n(l),o=(a(261),a(223)),u=a.n(o),c=a(12),s=a(13),m=a(15),d=a(14),p=(a(883),a(0)),h=a.n(p),v=a(848),f=a.n(v),y=(a(849),a(884)),g=(a(850),a(29)),w=a.n(g),E=a(51),b=a(52);function k(){return(k=Object(E.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("POST","/api/release",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var C=a(36),T=a.n(C),N=a(854),O=a.n(N);a(260);a.d(t,"default",function(){return S});var S=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).handleEditorChange=function(e){n.setState({value:e.text})},n.handleImageUpload=function(e){return new Promise(function(t){var a=new FileReader,n=new FormData;n.append("file",e),T()({method:"POST",url:"/api/upload",data:n}).then(function(e){e.data,t(e.data.result.url)}).catch(function(e){return console.log(e)}),a.readAsDataURL(e)})},n.onCustomImageUpload=function(e){},n.handleSetValue=function(){var e=window.prompt("Content");n.setState({value:e})},n.renderHTML=function(e){return n.mdParser.render(e)},n.selectTag=function(e){var t=n.state.type;n.setState({type:e.type===t?null:e.type})},n.changeTitle=function(e){n.setState({title:e.target.value})},n.submit=function(){var e={title:n.state.title,content:n.mdEditor.getHtmlValue(),htmlContent:n.mdEditor.getMdValue(),type:n.state.type};n.mdEditor.getMdValue().replace(/(<[^>]+>)|([\`])/gi,""),function(e){k.apply(this,arguments)}(e)},n.state={type:null},n.mdParser=new y({html:!0,linkify:!0,typographer:!0,highlight:function(e){if(e)try{return O.a.highlightAuto(e).value}catch(t){}return""}}),n.typeArray=[{type:1,color:"magenta",value:"React"},{type:2,color:"red",value:"webpack"},{type:3,color:"volcano",value:"koa2"},{type:4,color:"orange",value:"mysql"},{type:5,color:"blue",value:"canvas"},{type:6,color:"lime",value:"\u5176\u4ed6"}],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.isLivinig=!0}},{key:"componentWillUnmount",value:function(){this.isLivinig=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,n=t.title;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"release"},h.a.createElement("div",{className:"release-titleWrap"},"\u6807\u9898\uff1a",h.a.createElement(u.a,{value:n,className:"release-title",onChange:function(t){return e.changeTitle(t)}}),h.a.createElement(i.a,{type:"primary",onClick:function(){return e.submit()},className:"release-submit"},"\u63d0\u4ea4")),h.a.createElement("div",{className:"release-type"},h.a.createElement("div",null,"\u7c7b\u578b\uff1a"),this.typeArray.map(function(t){return h.a.createElement("div",{onClick:function(){return e.selectTag(t)},className:"release-Tag",key:t.type},h.a.createElement(r.a,{color:t.color,className:a===t.type?"release-TagItem":null},t.value))})),h.a.createElement("div",{className:"BraftEditor"},h.a.createElement(f.a,{ref:function(t){return e.mdEditor=t||void 0},value:this.state.value,style:{height:"500px",width:"100%"},renderHTML:this.renderHTML,config:{view:{menu:!0,md:!0,html:!0,fullScreen:!0,hideMenu:!0},table:{maxRow:5,maxCol:6}},onChange:this.handleEditorChange,onImageUpload:this.handleImageUpload}))))}}]),a}(h.a.Component)},883:function(e,t,a){}}]);